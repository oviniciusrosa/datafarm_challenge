import { ReactNode, createContext, useContext, useState } from "react";
import { useResourcesData } from "~/hooks/data/useResourcesData";
import { IResources } from "~/models/IResources";
import { IStop, IStopFilled } from "~/models/IStops";

interface ResourcesContextProps {
  addStop(stop: IStop): Promise<void>;
  finishStop(): Promise<void>;
  activeStop: IStopFilled | null;
  stops: IStopFilled[];
  resources: IResources | null;
}

const ResourcesContext = createContext<ResourcesContextProps>(
  {} as ResourcesContextProps
);

type Props = { children: ReactNode };

export default function ResourcesProvider({ children }: Props) {
  const { insertResources } = useResourcesData();

  const [resources, setResources] = useState<IResources | null>({
    machineries: [
      {
        id: 5356,
        name: "CL 045 - S690",
        serialNumber: "1CQS690ACK0125217",
        growerId: 10944,
      },
      {
        id: 5355,
        name: "HILUX",
        serialNumber: null,
        growerId: 10944,
      },
      {
        id: 5357,
        name: "PV 020 -  4040M",
        serialNumber: "1NW4040MAKF190037",
        growerId: 10944,
      },
      {
        id: 5354,
        name: "TR 037 - 6205J",
        serialNumber: "1BM6205JVFD000098",
        growerId: 10944,
      },
      {
        id: 5358,
        name: "TR 094 - 7815",
        serialNumber: "BM7815X080375",
        growerId: 10944,
      },
    ],
    farms: [
      {
        id: 17135,
        name: "Alvorada",
        growerName: "Carlos Alberto",
        fields: [
          {
            id: 108911,
            name: "VS 01",
          },
          {
            id: 108912,
            name: "VS 02",
          },
          {
            id: 108913,
            name: "VS 03",
          },
          {
            id: 108914,
            name: "VS 04",
          },
          {
            id: 108915,
            name: "VS 05",
          },
          {
            id: 108916,
            name: "VS 06",
          },
          {
            id: 108917,
            name: "VS 07",
          },
          {
            id: 108918,
            name: "VS 08",
          },
          {
            id: 108919,
            name: "VS 09",
          },
          {
            id: 108920,
            name: "VS 12",
          },
          {
            id: 108921,
            name: "VS 13",
          },
          {
            id: 108922,
            name: "VS 14",
          },
          {
            id: 108923,
            name: "VS 15",
          },
        ],
      },
      {
        id: 17134,
        name: "Santa Cristina",
        growerName: "Carlos Alberto",
        fields: [
          {
            id: 108924,
            name: "SC 01",
          },
          {
            id: 108925,
            name: "SC 02",
          },
          {
            id: 108926,
            name: "SC 03",
          },
          {
            id: 108927,
            name: "SC 04",
          },
        ],
      },
    ],
    reasons: [
      {
        id: 1,
        name: "Abastecimento de combustível",
        icon: "M192 160c0-17.673 14.327-32 32-32v0h320c17.673 0 32 14.327 32 32v0 320c0 17.673-14.327 32-32 32v0h-320c-17.673 0-32-14.327-32-32v0-320z M64 128c0-70.692 57.308-128 128-128v0h384c70.692 0 128 57.308 128 128v0 512c70.692 0 128 57.308 128 128v0 32c0 17.673 14.327 32 32 32s32-14.327 32-32v0-288h-32c-17.673 0-32-14.327-32-32v0-200c0-17.673 14.327-32 32-32v0h95.68c-0.704-30.464-3.392-57.216-12.864-78.208-5.232-12.379-13.961-22.429-24.945-29.158l-0.271-0.154c-11.776-7.040-29.696-12.48-57.6-12.48-17.673 0-32-14.327-32-32s14.327-32 32-32v0c36.096 0 66.176 7.040 90.368 21.504 24.512 14.592 40.576 35.264 50.816 58.048 18.88 41.92 18.816 93.76 18.816 133.184v203.2c0 0.019 0 0.041 0 0.064 0 17.673-14.327 32-32 32-0 0-0-0-0-0l-32-0v288c0 53.019-42.981 96-96 96s-96-42.981-96-96v0-32c0-35.346-28.654-64-64-64v0 256h32c17.673 0 32 14.327 32 32s-14.327 32-32 32v0h-704c-17.673 0-32-14.327-32-32s14.327-32 32-32v0h32v-832zM640 128c0-35.346-28.654-64-64-64v0h-384c-35.346 0-64 28.654-64 64v0 832h512v-832z",
      },
      {
        id: 2,
        name: "Ajustes e regulagem",
        icon: "M224 128h-64v320h64v-320zM614.4 448h-204.8l-25.6-35.2v-64l25.6-28.8h204.8l25.6 32v64l-25.6 32zM294.4 640h-204.8l-25.6-32v-64l25.6-32h204.8l25.6 32v64l-25.6 32zM544 128h-64v128h64v-128zM480 512h64v384h-64v-384zM224 704h-64v192h64v-192zM729.6 704h204.16l25.6-32v-60.8l-25.6-32h-204.16l-25.6 32v60.8l25.6 32zM864 128h-64v384h64v-384zM800 768h64v128h-64v-128z",
      },
      {
        id: 3,
        name: "Alimentação",
        icon: "M469.333 384h-85.333v-298.667h-85.333v298.667h-85.333v-298.667h-85.333v298.667c0 90.453 70.827 163.84 160 169.387v385.28h106.667v-385.28c89.173-5.547 160-78.933 160-169.387v-298.667h-85.333v298.667zM682.667 256v341.333h106.667v341.333h106.667v-853.333c-117.76 0-213.333 95.573-213.333 170.667z",
      },
      {
        id: 4,
        name: "Aquecimento da máquina",
        icon: "M640 554.667v-341.333c0-70.827-57.173-128-128-128s-128 57.173-128 128v341.333c-51.627 38.827-85.333 101.12-85.333 170.667 0 117.76 95.573 213.333 213.333 213.333s213.333-95.573 213.333-213.333c0-69.547-33.707-131.84-85.333-170.667zM469.333 213.333c0-23.467 19.2-42.667 42.667-42.667s42.667 19.2 42.667 42.667h-42.667v42.667h42.667v85.333h-42.667v42.667h42.667v85.333h-85.333v-256z",
      },
      {
        id: 5,
        name: "Condição climática",
        icon: "M170.112 705.664c12.811 4.374 21.859 16.306 21.859 30.351 0 3.612-0.598 7.084-1.702 10.323l0.067-0.225-32 96c-4.006 13.422-16.24 23.040-30.72 23.040-17.673 0-32-14.327-32-32 0-4.047 0.751-7.919 2.122-11.483l-0.074 0.219 32-96c4.374-12.811 16.306-21.859 30.351-21.859 3.612 0 7.084 0.598 10.323 1.702l-0.225-0.067zM778.112 705.664c12.811 4.374 21.859 16.306 21.859 30.351 0 3.612-0.598 7.084-1.702 10.323l0.067-0.225-32 96c-4.006 13.422-16.24 23.040-30.72 23.040-17.673 0-32-14.327-32-32 0-4.047 0.751-7.919 2.122-11.483l-0.074 0.219 32-96c4.374-12.811 16.306-21.859 30.351-21.859 3.612 0 7.084 0.598 10.323 1.702l-0.225-0.067zM298.112 801.664c12.811 4.374 21.859 16.306 21.859 30.351 0 3.612-0.598 7.084-1.702 10.323l0.067-0.225-32 96c-4.006 13.422-16.24 23.040-30.72 23.040-17.673 0-32-14.327-32-32 0-4.047 0.751-7.919 2.122-11.483l-0.074 0.219 32-96c4.374-12.811 16.306-21.859 30.351-21.859 3.612 0 7.084 0.598 10.323 1.702l-0.225-0.067zM906.112 801.664c12.811 4.374 21.859 16.306 21.859 30.351 0 3.612-0.598 7.084-1.702 10.323l0.067-0.225-32 96c-4.006 13.422-16.24 23.040-30.72 23.040-17.673 0-32-14.327-32-32 0-4.047 0.751-7.919 2.122-11.483l-0.074 0.219 32-96c4.374-12.811 16.306-21.859 30.351-21.859 3.612 0 7.084 0.598 10.323 1.702l-0.225-0.067zM857.92 257.728c-30.132-147.99-159.217-257.785-313.946-257.785-131.029 0-243.667 78.736-293.185 191.475l-0.805 2.054c-7.694-0.937-16.602-1.472-25.635-1.472-123.712 0-224 100.288-224 224 0 123.589 100.090 223.801 223.632 224l0.019 0h608c0.065 0 0.142 0 0.219 0 106.039 0 192-85.961 192-192 0-96.975-71.895-177.159-165.291-190.157l-1.008-0.115zM544 64c0.016-0 0.034-0 0.053-0 131.351 0 239.596 98.924 254.299 226.333l0.111 1.187c1.833 16.093 15.373 28.481 31.806 28.481 0.068 0 0.136-0 0.205-0.001l-0.010 0h1.536c70.692 0 128 57.308 128 128s-57.308 128-128 128v0h-608c-88.331-0.045-159.92-71.662-159.92-160 0-88.366 71.634-160 160-160 13.722 0 27.040 1.727 39.749 4.976l-1.108-0.24c2.325 0.604 4.994 0.951 7.744 0.951 14.1 0 26.070-9.119 30.334-21.782l0.066-0.226c34.792-102.903 130.465-175.666 243.134-175.68l0.002-0zM451.392 721.664c5.375-10.558 16.162-17.664 28.608-17.664l64-0c17.663 0.014 31.976 14.335 31.976 32 0 3.617-0.6 7.094-1.706 10.337l0.067-0.225-17.92 53.888h51.584c17.654 0.026 31.954 14.343 31.954 32 0 7.582-2.637 14.547-7.043 20.030l0.048-0.062-128 160c-5.914 7.303-14.88 11.934-24.927 11.934-17.673 0-32-14.327-32-32 0-2.714 0.338-5.35 0.974-7.867l-0.047 0.221 22.080-88.256h-55.040c-17.673-0.001-31.999-14.327-31.999-32 0-5.226 1.253-10.16 3.475-14.517l-0.084 0.181 64-128z",
      },
      {
        id: 6,
        name: "Limpeza",
        icon: "M899.1 869.6l-53-305.6h17.9c14.4 0 26-11.6 26-26v-192c0-14.4-11.6-26-26-26h-246v-182c0-14.4-11.6-26-26-26h-160c-14.4 0-26 11.6-26 26v182h-246c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6c-0.3 1.5-0.4 3-0.4 4.4 0 14.4 11.6 26 26 26h723c1.5 0 3-0.1 4.4-0.4 14.2-2.4 23.7-15.9 21.2-30zM204 390h272v-208h72v208h272v104h-616v-104zM672 830v-156c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156h-192v-156c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156h-149.2l45.1-260h528.1l45.1 260h-149.1z",
      },
      {
        id: 7,
        name: "Manutenção Corretiva",
        icon: "M964.693 810.24l-387.413-387.413c39.68-99.84 19.2-217.6-61.44-298.667-98.133-98.133-250.88-107.093-359.68-27.733l163.84 164.267-60.587 60.16-163.413-163.413c-79.36 108.373-70.4 261.547 27.733 359.253 79.36 79.36 194.987 100.267 293.973 63.147l388.693 388.693c16.64 16.64 43.52 16.64 60.16 0l98.133-98.133c17.067-16.213 17.067-43.093 0-60.16zM836.693 878.507l-403.627-403.627c-26.027 19.2-55.040 30.72-85.333 34.987-58.027 8.533-119.040-8.96-163.413-53.333-40.533-40.107-59.307-93.867-56.32-146.773l131.84 131.84 180.907-180.907-131.84-131.84c52.907-2.987 106.24 15.787 146.773 55.893 46.080 46.080 63.573 109.653 52.907 168.96-5.12 30.293-17.92 58.453-37.547 83.627l403.2 403.2-37.547 37.973z",
      },
      {
        id: 8,
        name: "Manutenção Preventiva",
        icon: "M256 32c0-17.673-14.327-32-32-32s-32 14.327-32 32v0 32h-64c-70.692 0-128 57.308-128 128v0 704c0 70.692 57.308 128 128 128v0h768c70.692 0 128-57.308 128-128v0-704c0-70.692-57.308-128-128-128v0h-64v-32c0-17.673-14.327-32-32-32s-32 14.327-32 32v0 32h-512v-32zM64 896v-640h896v640c0 35.346-28.654 64-64 64v0h-768c-35.346 0-64-28.654-64-64v0zM512 479.552c106.496-109.504 372.8 82.112 0 328.448-372.8-246.4-106.496-437.952 0-328.448z",
      },
      {
        id: 9,
        name: "Outros",
        icon: "M850.645 370.347c-0.469-1.365-0.853-2.688-1.408-4.011-2.14-4.832-4.953-8.969-8.375-12.514l0.012 0.012-256-256c-3.532-3.41-7.67-6.222-12.231-8.255l-0.27-0.108c-1.28-0.597-2.645-0.939-4.011-1.408-3.253-1.147-7.019-1.924-10.929-2.17l-0.122-0.006c-0.939-0.085-1.749-0.555-2.645-0.555h-298.667c-47.061 0-85.333 38.272-85.333 85.333v682.667c0 47.061 38.272 85.333 85.333 85.333h512c47.061 0 85.333-38.272 85.333-85.333v-469.333c0-0.896-0.469-1.707-0.555-2.645-0.24-4.012-1.003-7.765-2.222-11.305l0.089 0.297zM707.669 341.333h-110.336v-110.336l110.336 110.336zM256 853.333v-682.667h256v213.333c0 23.564 19.103 42.667 42.667 42.667v0h213.333l0.085 426.667h-512.085z",
      },
    ],
  });

  const [activeStop, setActiveStop] = useState<IStopFilled | null>();
  const [stops, setStops] = useState<IStopFilled[]>([]);

  async function addStop(stop: IStop) {
    setActiveStop({
      farm: {
        id: 17135,
        name: "Alvorada",
        growerName: "Carlos Alberto",
      },
      field: {
        id: 108923,
        name: "VS 15",
        idFarm: 17135,
      },
      machinery: {
        id: 5356,
        name: "CL 045 - S690",
        serialNumber: "1CQS690ACK0125217",
        growerId: 10944,
      },
      reason: {
        id: 1,
        name: "Abastecimento de combustível",
        icon: "M192 160c0-17.673 14.327-32 32-32v0h320c17.673 0 32 14.327 32 32v0 320c0 17.673-14.327 32-32 32v0h-320c-17.673 0-32-14.327-32-32v0-320z M64 128c0-70.692 57.308-128 128-128v0h384c70.692 0 128 57.308 128 128v0 512c70.692 0 128 57.308 128 128v0 32c0 17.673 14.327 32 32 32s32-14.327 32-32v0-288h-32c-17.673 0-32-14.327-32-32v0-200c0-17.673 14.327-32 32-32v0h95.68c-0.704-30.464-3.392-57.216-12.864-78.208-5.232-12.379-13.961-22.429-24.945-29.158l-0.271-0.154c-11.776-7.040-29.696-12.48-57.6-12.48-17.673 0-32-14.327-32-32s14.327-32 32-32v0c36.096 0 66.176 7.040 90.368 21.504 24.512 14.592 40.576 35.264 50.816 58.048 18.88 41.92 18.816 93.76 18.816 133.184v203.2c0 0.019 0 0.041 0 0.064 0 17.673-14.327 32-32 32-0 0-0-0-0-0l-32-0v288c0 53.019-42.981 96-96 96s-96-42.981-96-96v0-32c0-35.346-28.654-64-64-64v0 256h32c17.673 0 32 14.327 32 32s-14.327 32-32 32v0h-704c-17.673 0-32-14.327-32-32s14.327-32 32-32v0h32v-832zM640 128c0-35.346-28.654-64-64-64v0h-384c-35.346 0-64 28.654-64 64v0 832h512v-832z",
      },
      latitude: 0,
      longitude: 0,
      minutes: 1,
      uuid: "dausidhsaudhsai",
      note: "testeeee",
    });
    console.error("Missing Implementation");
  }

  async function finishStop() {
    setStops(prev => [...prev, activeStop]);
    setActiveStop(null);
    console.error("Missing Implementation");
  }

  return (
    <ResourcesContext.Provider
      value={{ addStop, stops, activeStop, resources, finishStop }}>
      {children}
    </ResourcesContext.Provider>
  );
}

export function useResources(): ResourcesContextProps {
  const contextProps = useContext(ResourcesContext);

  return contextProps;
}
